(function(a){a.fn.spinner=function(b){return this.each(function(){var h={value:1,min:0};var n=a.extend(h,b);var k={up:38,down:40};var c=a("<div></div>");c.addClass("spinner");var g=a(this).addClass("value").attr("maxlength","2").val(n.value).bind("keyup paste change",function(p){var o=a(this);if(p.keyCode==k.up){j(1)}else{if(p.keyCode==k.down){j(-1)}else{if(i(o)!=c.data("lastValidValue")){e(o)}}}});g.wrap(c);var f=a('<button class="increase">+</button>').click(function(){j(1)});var m=a('<button class="decrease">-</button>').click(function(){j(-1)});l(g);c.data("lastValidValue",n.value);g.before(m);g.after(f);function j(o){g.val(i()+o);e(g)}function e(p){clearTimeout(c.data("timeout"));var o=l(p);if(!d(o)){g.trigger("update",[p,o])}}function l(q){var p=i();if(p<=n.min){m.attr("disabled","disabled")}else{m.removeAttr("disabled")}q.toggleClass("invalid",d(p)).toggleClass("passive",p===0);if(d(p)){var o=setTimeout(function(){g.val(c.data("lastValidValue"));l(q)},500);c.data("timeout",o)}else{c.data("lastValidValue",p)}return p}function d(o){return isNaN(+o)||o<n.min}function i(o){o=o||g;return parseInt(o.val()||0,10)}})}})(jQuery);